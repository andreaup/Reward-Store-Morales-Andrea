(this["webpackJsonpreward-store-morales-andrea"]=this["webpackJsonpreward-store-morales-andrea"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/header-x1.f0b98264.png"},24:function(e,t,a){e.exports=a.p+"static/media/buy-blue.2f11a957.svg"},25:function(e,t,a){e.exports=a.p+"static/media/buy-white.40bc2813.svg"},27:function(e,t,a){e.exports=a.p+"static/media/aerolab-logo.71af6f4b.svg"},28:function(e,t,a){e.exports=a(40)},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),i=a(10),s=a(2),o={name:"",points:0},u=r.a.createContext();function m(e){var t=e.children,a=Object(n.useState)(o),c=Object(s.a)(a,2),l=c[0],i=c[1];return r.a.createElement(u.Provider,{value:{user:l,setUser:i}},t)}var d=a(23),E=a.n(d),f=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:E.a,alt:"cover"}),r.a.createElement("h1",null,"Electronics"))},p=a(1),b=a(7),h=a(11),v=a.n(h),g=a(16),j="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjQ3MGY3ZDc0MjM1MjAwMWVkOTA5OGUiLCJpYXQiOjE1OTg0OTI1NDF9.66juResYOZc1Urk0tfFpUFeEcwqZPwnlQ0ULZLiQwcM",O={load_user:{id:"profile",path:"/user/me",method:"GET"},products:{id:"products",path:"/products",method:"GET"},history:{id:"history",path:"/user/history",method:"GET"},redeem:{id:"redeem",path:"/redeem",method:"POST"},points:{id:"points",path:"/user/points",method:"POST"}};function N(e){return y.apply(this,arguments)}function y(){return(y=Object(g.a)(v.a.mark((function e(t){var a,n,r,c,l,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,n=a.path,r=a.method,c=t.body,l={method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)}},"POST"===r&&(l=Object(b.a)(Object(b.a)({},l),{},{body:JSON.stringify(c)})),e.next=5,fetch("https://coding-challenge-api.aerolab.co"+n,l);case 5:return i=e.sent,e.next=8,i.json();case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w={lowPrice:"Lowest price",hightPrice:"Higest price"},x={id:"Any category",options:[]},C={id:"Any price",options:["0 - 500","501 - 1000","1001 - 1500","1501 - 2000","2001 - 2500"]},S=[1e3,5e3,7500],k=function(e){var t=e.setSortBy,a=e.jump,c=Object(n.useState)(""),l=Object(s.a)(c,2),i=l[0],o=l[1];return r.a.createElement("div",{className:"bar"},r.a.createElement("p",null,"Sort by: "),Object.entries(w).map((function(e){return r.a.createElement("button",{key:e[1],className:i===e[1]?"btn-active":"btn",onClick:function(){return n=e[1],o(n),t(n),void a(1);var n}},e[1])})))},P=a(17),M=function(e){var t=e.handleFilterChange,a=e.id,c=e.options,l=e.jump,i=Object(n.useState)(""),o=Object(s.a)(i,2),u=o[0],m=o[1];c=[a].concat(Object(P.a)(c));return r.a.createElement("div",{className:"filter"},r.a.createElement("select",{"data-testid":"selectOption",onChange:function(e){return a=e.target.value,m(a),t(a),void l(1);var a},value:u},c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))},I=function(e){var t=e.products,a=e.setCategoryFilter,n=e.setPriceFilter,c=e.jump,l=Object(P.a)(t).map((function(e){return e.category})),i=Object(b.a)(Object(b.a)({},x),{},{options:l.filter((function(e,t){return l.indexOf(e)===t}))});return r.a.createElement("div",{className:"filterBar"},r.a.createElement("p",null,"Filter by: "),r.a.createElement(M,Object.assign({},i,{handleFilterChange:a,jump:c})),r.a.createElement(M,Object.assign({},C,{handleFilterChange:n,jump:c})))};var F=function(e,t){var a=Object(n.useState)(1),r=Object(s.a)(a,2),c=r[0],l=r[1],i=Math.ceil(e.length/t);return{next:function(){l((function(e){return Math.min(e+1,i)}))},prev:function(){l((function(e){return Math.max(e-1,1)}))},currentData:function(){var a=(c-1)*t,n=a+t;return e.slice(a,n)},currentPage:c,maxPage:i}},T=function(e){var t=e.currentPage,a=(e.jump,e.prev),n=e.next,c=e.maxPage;return r.a.createElement("div",{className:"pagination"},r.a.createElement("p",null,16*t," of ",16*c," products"),r.a.createElement("button",{onClick:function(){return a()}},r.a.createElement("i",{className:"fa fa-arrow-left","aria-hidden":"true"})),r.a.createElement("button",null,t),r.a.createElement("button",{onClick:function(){return n()}},r.a.createElement("i",{className:"fa fa-arrow-right","aria-hidden":"true"})))},U=function(e){var t=e.info.id,a=e.render,c=Object(n.useState)([]),l=Object(s.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)(C.id),m=Object(s.a)(u,2),d=m[0],E=m[1],f=Object(n.useState)(x.id),p=Object(s.a)(f,2),h=p[0],j=p[1],y=Object(n.useState)(""),S=Object(s.a)(y,2),P=S[0],M=S[1];Object(n.useEffect)((function(){Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,N({data:O[t]});case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t]);var U=i.filter((function(e){return(h===x.id||e.category===h)&&(d===C.id||e.cost>parseInt(d.split("-")[0])&&e.cost<=parseInt(d.split("-")[1]))})).sort((function(e,t){return P===w.lowPrice?e.cost-t.cost:t.cost-e.cost})),J=F(U,16),A=J.next,B=J.prev,D=J.jump,G=J.currentData,R=J.currentPage,Y=J.maxPage;return r.a.createElement("div",{className:"products"},r.a.createElement("div",{className:"menu"},r.a.createElement(T,{currentPage:R,prev:B,next:A,maxPage:Y}),r.a.createElement(k,{setSortBy:M,jump:D}),r.a.createElement(I,{products:i,setCategoryFilter:j,setPriceFilter:E,jump:D})),r.a.createElement("div",{className:"grid"},G().map((function(e){return r.a.createElement(n.Fragment,{key:Math.random()},a(Object(b.a)({},e)))}))),r.a.createElement("div",{className:"menu",style:{justifyContent:"right",paddingRight:"10%"}},r.a.createElement(T,{currentPage:R,prev:B,next:A,maxPage:Y})))},J=a(8),A=a.n(J),B=function(){var e="Add coins to your account now",t=Object(n.useContext)(u),a=t.user,c=t.setUser,l=Object(n.useState)(S[0]),i=Object(s.a)(l,2),o=i[0],m=i[1],d=Object(n.useState)(e),E=Object(s.a)(d,2),f=E[0],p=E[1],h=Object(n.useRef)(!0);return Object(n.useEffect)((function(){return function(){h.current=!1}}),[]),r.a.createElement("div",{className:"points-comp"},r.a.createElement("h1",null,"Get Coins!!",r.a.createElement("i",{className:"fa fa-money","aria-hidden":"true"})),r.a.createElement("div",{className:"options"},S.map((function(e){return r.a.createElement("button",{key:e,className:o===e?"btn-active number":"btn number",onClick:function(){return m(e)}},r.a.createElement("img",{src:A.a,alt:"coin"}),r.a.createElement("p",null,e))}))),r.a.createElement("button",{className:"btn btn-add btn-add-points",onClick:function(){N({data:O.points,body:{amount:o}}).then((function(e){c(Object(b.a)(Object(b.a)({},a),{},{points:e["New coins added to your account"]})),h.current&&p(e.message)})).catch(h.current&&p(e))}},"Buy!"),r.a.createElement("h3",null,f,"!"))},D=function(e){var t=e.info,a=e.render,c=Object(n.useContext)(u).user,l=c.name,i=c.points,s=c.createDate,o=void 0===s?"":s;return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h1",null,l),r.a.createElement("h2",null,r.a.createElement("i",{className:"fa fa-money","aria-hidden":"true"})," Coins available: ",i),r.a.createElement("p",null,"Account created on: ",o.substr(0,10))),r.a.createElement(B,null)),r.a.createElement("h1",{className:"history-title"},r.a.createElement("i",{className:"fa fa-history","aria-hidden":"true"})," HISTORY"),r.a.createElement(U,{info:t,render:a}))},G=a(24),R=a.n(G),Y=a(25),_=a.n(Y),Q=document.getElementById("modal"),Z=function(e){var t=document.createElement("div");return Object(n.useEffect)((function(){return Q.appendChild(t),function(){Q.removeChild(t)}}),[t]),Object(c.createPortal)(r.a.createElement("div",null,e.children),t)},L=function(e){var t=e._id,a=e.name,c=e.cost,l=e.category,i=e.img.url,o=Object(n.useContext)(u),m=o.user,d=o.setUser,E=Object(n.useState)(!1),f=Object(s.a)(E,2),p=f[0],b=f[1],h=Object(n.useState)(""),v=Object(s.a)(h,2),g=v[0],j=v[1],y=m.points-c;return r.a.createElement("div",{className:"card"},y>0?r.a.createElement("img",{className:"icon",src:R.a,alt:"icon"}):r.a.createElement("div",{className:"icon"},r.a.createElement("div",{className:"you-need"},r.a.createElement("p",null," You need ",-y," Coins"),r.a.createElement("img",{src:A.a,alt:"coin"}))),r.a.createElement("img",{className:"product",src:i,alt:"product"}),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"line"}),r.a.createElement("p",null,l),r.a.createElement("h3",null,a),r.a.createElement("div",{className:"card-points"},r.a.createElement("img",{src:A.a,alt:"coin"}),r.a.createElement("p",null,c))),y>0&&r.a.createElement("div",{className:"card-hover"},r.a.createElement("img",{className:"icon",src:_.a,alt:"icon"}),r.a.createElement("div",{className:"buy-info"},r.a.createElement("div",{className:"points-card"},r.a.createElement("p",null,c),r.a.createElement("img",{src:A.a,alt:"coin"})),r.a.createElement("button",{className:"btn btn-add",onClick:function(){N({data:O.redeem,body:{productId:t}}).then((function(e){b(!0),"You've redeem the product successfully"===e.message?j("Sucess!! Everything is working!!"):j("Oh no, something went wrong!"),N({data:O.load_user}).then((function(e){return d(e)}))})).catch((function(){b(!0),j("Oh no, something went wrong!")}))}},"Redeem now"))),p&&r.a.createElement(Z,{setShowModal:b,showModal:p},r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"modal-close",onClick:function(){return b(!p)}},"x"),r.a.createElement("div",{className:"modal-confirmation"},r.a.createElement("h1",null,g))))))},z=function(e){e._id;var t=e.name,a=e.cost,n=e.category,c=e.img.url;return r.a.createElement("div",{className:"card history-card"},r.a.createElement("img",{src:c,alt:"product"}),r.a.createElement("div",{className:"info"},r.a.createElement("p",null,n),r.a.createElement("h3",null,t),r.a.createElement("div",{className:"card-points"},r.a.createElement("img",{src:A.a,alt:"coin"}),r.a.createElement("p",null,a))))},H=function(){return r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/reward-store/",render:function(){return r.a.createElement(U,{info:O.products,render:function(e){return r.a.createElement(L,e)}})}}),r.a.createElement(p.a,{exact:!0,path:"/reward-store/profile",render:function(){return r.a.createElement(D,{info:O.history,render:function(e){return r.a.createElement(z,e)}})}}))},V=a(27),W=a.n(V),X=function(e){var t=e.setShowModal,a=e.showModal,c=Object(n.useContext)(u),l=c.user.points,i=c.setUser;return Object(n.useEffect)((function(){N({data:O.load_user}).then((function(e){return i(e)}))}),[i]),r.a.createElement("button",{className:"profileData",onClick:function(){return t(!a)}},r.a.createElement("div",{className:"points"},r.a.createElement("p",null,l),r.a.createElement("img",{src:A.a,alt:"coin"})))},q=function(){var e=Object(n.useContext)(u),t=e.user.name,a=e.setUser;Object(n.useEffect)((function(){N({data:O.load_user}).then((function(e){return a(e)}))}),[a]);var c=Object(n.useState)(!1),l=Object(s.a)(c,2),o=l[0],m=l[1];return r.a.createElement("div",{className:"nav-bar"},r.a.createElement("ul",{className:"links"},r.a.createElement("div",{className:"logo"},r.a.createElement(i.b,{className:"link",to:"/reward-store/"},r.a.createElement("img",{src:W.a,alt:"Products"})," Products"))),r.a.createElement("div",{className:"profileData"},r.a.createElement(i.b,{className:"link",to:"/reward-store/profile"},r.a.createElement("p",{className:"username"},r.a.createElement("i",{className:"fa fa-user","aria-hidden":"true"}," "),"  |",t)),r.a.createElement(X,{setShowModal:m,showModal:o}),o&&r.a.createElement(Z,null,r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"modal-close",onClick:function(){return m(!o)}},r.a.createElement("i",{class:"fa fa-times-circle","aria-hidden":"true"})),r.a.createElement("div",{className:"modal-profile"},r.a.createElement(B,null)))))))},K=function(){return r.a.createElement("div",null,r.a.createElement(m,null,r.a.createElement(q,null),r.a.createElement(f,null),r.a.createElement(H,null)))};a(39);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(K,null))),document.getElementById("root"))},8:function(e,t,a){e.exports=a.p+"static/media/coin.4669120c.svg"}},[[28,1,2]]]);
//# sourceMappingURL=main.2f75bafd.chunk.js.map